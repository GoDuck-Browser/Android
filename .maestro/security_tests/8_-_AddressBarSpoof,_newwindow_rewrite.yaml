appId: com.duckduckgo.mobile.android.debug
tags:
    - securityTest
---
- launchApp:
    clearState: true
- runFlow: ../shared/onboarding.yaml
# Test 1
- doubleTapOn:
    id: "omnibarTextInput"
- inputText: "https://privacy-test-pages.site/security/address-bar-spoofing/spoof-new-window.html"
- pressKey: Enter
- tapOn: "Got It"
- tapOn: "New Window"
- tapOn: 
    id: "com.duckduckgo.mobile.android:id/tabCount"
- tapOn: "URL Spoofing"
- tapOn: "Spoof"
# Now check the address bar hasn't been updated too early resulting in spoofed content
- copyTextFrom:
    id: "omnibarTextInput"
#- assertTrue: ${maestro.copiedText == "https://privacy-test-pages.site/security/address-bar-spoofing/spoof-js-page-rewrite.html"}
- assertNotVisible: "Privacy Test Pages" 
